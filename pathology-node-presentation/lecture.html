<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pathology Informatics Lecture</title>

    <!-- Modern typography -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- RevealJS Core CSS -->
    <link rel="stylesheet" href="node_modules/reveal.js/dist/reveal.css">
    <link rel="stylesheet" href="node_modules/reveal.js/dist/theme/white.css">

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="css/bootstrap-overrides.css">

    <!-- Shared presentation CSS -->
    <link rel="stylesheet" href="css/theme.css">
    <link rel="stylesheet" href="css/transitions.css">
    <link rel="stylesheet" href="css/backgrounds.css">
    <link rel="stylesheet" href="css/base.css">

    <!-- Lecture-specific CSS -->
    <link rel="stylesheet" href="css/intro.css">

    <!-- Minimal integration overrides -->
    <style>
        .reveal h1, .reveal h2, .reveal h3, .reveal h4 {
            font-family: 'Inter', 'Helvetica Neue', Arial, sans-serif;
            text-transform: none;
        }
        .reveal { font-family: 'Inter', 'Helvetica Neue', Arial, sans-serif; }
    </style>
</head>
<body>
    <div class="reveal">
        <div class="slides">
            <!-- Slides are generated dynamically by the slide engine -->
            <section>
                <h2>Loading lecture...</h2>
            </section>
        </div>
    </div>

    <!-- RevealJS Core JS -->
    <script src="node_modules/reveal.js/dist/reveal.js"></script>
    <script src="node_modules/reveal.js/plugin/notes/notes.js"></script>
    <script src="node_modules/reveal.js/plugin/markdown/markdown.js"></script>
    <script src="node_modules/reveal.js/plugin/highlight/highlight.js"></script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>

    <!-- D3.js -->
    <script src="node_modules/d3/dist/d3.min.js"></script>

    <!-- Slide Engine + Libraries -->
    <script src="js/widgets.js"></script>
    <script src="js/viz-library.js"></script>
    <script src="js/slide-engine.js"></script>

    <script>
        // Determine which lecture to load from query parameter
        // Usage: lecture.html?lecture=intro_pathology_informatics
        var params = new URLSearchParams(window.location.search);
        var lectureName = params.get('lecture') || 'intro_pathology_informatics';
        var jsonUrl = 'data/lectures/' + lectureName + '.json';

        // Load the lecture JSON, then initialize Reveal
        SlideEngine.loadLecture(jsonUrl, function (data) {
            Reveal.initialize({
                width: 1200,
                height: 700,
                margin: 0.04,
                minScale: 0.2,
                maxScale: 2.0,

                controls: true,
                progress: true,
                center: false,
                hash: true,

                transition: 'slide',
                transitionSpeed: 'default',
                backgroundTransition: 'fade',

                plugins: [RevealNotes, RevealMarkdown, RevealHighlight]
            }).then(function () {
                // Initialize interactive widgets after Reveal is ready
                SlideEngine.initWidgets();
                SlideEngine.initVizOnSlideChange();
                SlideEngine.initBadgeOverlay();
            });
        });
    </script>
</body>
</html>
